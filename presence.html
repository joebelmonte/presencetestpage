<html>
  <html lang="en">
    <head>
      <meta charset="utf-8" />
      <title>Presence Test Page</title>
      <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
      <link rel="stylesheet" href="./presence-testing/presence.css" />
      <script src="./presence-testing/config-persistence.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/hmac-sha256.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/enc-base64-min.js"></script>
      <script type="text/javascript">
        // we use base65URL
        CryptoJS.enc.Base64._map =
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";
      </script>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          var tag = document.createElement("script");
          tag.src = "./presence-testing/presence.js";
          document.getElementsByTagName("head")[0].appendChild(tag);
          if (window.location.protocol === "http:")
            window.location.protocol = "https:";
        });
      </script>
    </head>

    <body>
      <h2 id="title">Presence Test Page</h2>
      <div id="about-link">
        <a
          href="https://github.com/joebelmonte/presencetestpage"
          target="_blank"
          >About</a
        >
      </div>

      <div id="glanceUI">
        <div id="login-key">
          <div class="user-input">
            <p>PartnerID/Group Number:</p>
            <input
              type="text"
              name="PartnerID"
              placeholder="PartnerID/Group Number"
              id="PartnerID"
            />
          </div>
          <div class="user-input">
            <p>Authentication:</p>
            <input
              type="text"
              name="authentication"
              placeholder="API or Login Key"
              id="auth-key"
            />
            <select id="auth-key-select">
              <option value="api-key">API Key</option>
              <option value="login-key">Login Key</option>
            </select>
            <div id="timeout">
              <p>Timeout, in seconds. Max is 86,400 (1 day):</p>
              <input
                type="number"
                name="Timeout"
                placeholder="Timeout"
                id="Timeout"
                value="3600"
              />
            </div>
          </div>
          <div class="user-input">
            <p>Partner User ID:</p>
            <input
              type="text"
              name="PartnerUserID"
              placeholder="PartnerUserID"
              id="PartnerUserID"
            />
          </div>
          <div class="user-input">
            <p>Visitor ID:</p>
            <input
              type="text"
              name="visitorID"
              placeholder="Visitor ID"
              id="visitorID"
            />
          </div>
          <button id="SubmitButton">Submit</button>
        </div>
        <div id="presence-button">
          <button id="cobrowsebutton">Agent Start Cobrowse Session</button>
          <div id="waitingforcustomer">
            <div id="loader"></div>
            <p>Waiting for customer...</p>
            <button id="presencecancel">Cancel</button>
          </div>
          <div id="vistor-info">
            <p>Visitor URL: <span id="visitorurl"></span></p>
            <p>Visitor Browser: <span id="visitorbrowser"></span></p>
            <p>
              Visitor Browser Version: <span id="visitorbrowserversion"></span>
            </p>
            <p>Visitor Platform: <span id="visitorplatform"></span></p>
          </div>
        </div>
      </div>
      <div id="session-key-join">
        <input
          type="text"
          name="FirstName"
          placeholder="Session Key"
          id="session-key"
        />
        <button id="join-with-key">Join With Key</button>
      </div>
      <div id="open-options">
        <p>Open session in:</p>
        <select id="open-session-in">
          <option value="browser">Browser</option>
          <option value="panorama">Panorama</option>
        </select>
      </div>
      <div id="configs">
        <p>Group ID: <span id="groupid-setting"></span></p>
        <p>Partner User ID: <span id="puid-setting"></span></p>
        <p>Visitor ID: <span id="visitorid-setting"></span></p>
      </div>
      <script>
        // Change backgroundcolor if on dev
        if (window.location.href.includes("dev")) {
          document.body.style.backgroundColor = "#7bed9f";
        }
      </script>
    </body>
  </html>
</html>
